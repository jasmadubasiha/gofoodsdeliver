<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoFoods Deliver</title>
    <style>
        :root { --primary: #2ecc71; --secondary: #27ae60; --dark: #2c3e50; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; display: flex; justify-content: center; }
        .container { background: white; width: 100%; max-width: 450px; min-height: 100vh; box-shadow: 0 0 20px rgba(0,0,0,0.1); padding: 20px; position: relative; }
        
        /* Login Overlay */
        #loginOverlay { position: fixed; inset: 0; background: white; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
        .logo { font-size: 32px; font-weight: bold; color: var(--primary); margin-bottom: 20px; }
        
        input, select, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; font-size: 16px; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; margin-top: 10px; color: white; }
        .btn-primary { background: var(--primary); }
        .btn-primary:hover { background: var(--secondary); }

        /* Card Animation Overlay */
        #paymentProcessing { position: fixed; inset: 0; background: rgba(255,255,255,0.95); z-index: 10001; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .loader { border: 5px solid #f3f3f3; border-top: 5px solid var(--primary); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .card-box { border: 1px solid #eee; padding: 15px; border-radius: 15px; background: #fafafa; display: none; margin-top: 10px; }
        .total-banner { background: var(--dark); color: white; padding: 20px; border-radius: 15px; text-align: center; margin: 20px 0; font-size: 22px; font-weight: bold; }
        #mainApp { display: none; }
    </style>
</head>
<body>

<div id="loginOverlay">
    <div class="logo">GoFoods Deliver</div>
    <p>‡∂±‡∂∏ ‡∑É‡∑Ñ ‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª Location ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì ‡∂á‡∂≠‡∑î‡∂Ω‡∑ä ‡∑Ä‡∂±‡∑ä‡∂±.</p>
    <input type="text" id="loginName" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏">
    <input type="tel" id="loginPhone" placeholder="‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ (07xxxxxxxx)" maxlength="10">
    <button class="btn btn-primary" onclick="attemptLogin()">Login & Get Location üìç</button>
</div>

<div id="paymentProcessing">
    <div class="loader"></div>
    <h3 id="processText">Connecting to Bank...</h3>
</div>

<div class="container" id="mainApp">
    <h2 style="color:var(--primary); text-align:center;">GoFoods Deliver</h2>
    
    <div id="orderForm">
        <label>‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ ‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î‡∂∫‡∑í ‚úÖ</label>
        <input type="text" id="finalLocationDisplay" value="GPS Location Captured" readonly style="font-size: 12px; color: #27ae60; font-weight: bold;">

        <label>‡∂Ü‡∑Ñ‡∑è‡∂ª ‡∑Ä‡∂ª‡∑ä‡∂ú‡∂∫:</label>
        <select id="foodItem" onchange="calcTotal()">
            <option value="0">-- ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
            <option value="1100">‡∂†‡∑í‡∂ö‡∂±‡∑ä ‡∂ª‡∂∫‡∑í‡∑É‡∑ä - ‡∂ª‡∑î. 1100</option>
            <option value="1400">‡∂∏‡∑í‡∂ö‡∑ä‡∑É‡∑ä ‡∂ª‡∂∫‡∑í‡∑É‡∑ä - ‡∂ª‡∑î. 1400</option>
            <option value="990">‡∂ö‡∑ú‡∂≠‡∑ä‡∂≠‡∑î Full - ‡∂ª‡∑î. 990</option>
            <option value="500">‡∂†‡∑í‡∂ö‡∂±‡∑ä ‡∂ª‡∂∫‡∑í‡∑É‡∑ä (Normal) - ‡∂ª‡∑î. 500</option>
        </select>

        <label>‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫ (Quantity):</label>
        <input type="number" id="qty" value="1" min="1" onchange="calcTotal()">

        <label>‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫:</label>
        <select id="area" onchange="calcTotal()">
            <option value="0">-- ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
            <option value="300">‡∂∏‡∑è‡∂∏‡∂©‡∂Ω (300)</option>
            <option value="400">‡∑Ñ‡∑ê‡∂©‡∑Ä‡∑í‡∂±‡∑ä‡∂± (400)</option>
            <option value="250">‡∑Ä‡∂Ω‡∑ö‡∑Ä‡∂≠‡∑ä‡∂≠ (250)</option>
            <option value="200">‡∂±‡∑ù‡∂±‡∂ú‡∂∏ (200)</option>
        </select>

        <div class="total-banner" id="totalDisplay">‡∂∏‡∑î‡∑Ö‡∑î ‡∂ú‡∑è‡∑É‡∑ä‡∂≠‡∑î‡∑Ä: ‡∂ª‡∑î. 0.00</div>

        <label>‡∂ú‡∑ô‡∑Ä‡∑ì‡∂∏‡∑ö ‡∂ö‡∑ä‚Äç‡∂ª‡∂∏‡∂∫:</label>
        <select id="payMethod" onchange="togglePayFields()">
            <option value="">-- ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
            <option value="Card">Visa / Master Card</option>
            <option value="QR">People's Pay QR</option>
            <option value="Bank">Bank Transfer</option>
        </select>

        <div id="cardBox" class="card-box">
            <input type="text" placeholder="Card Number" maxlength="16">
            <div style="display:flex; gap:10px;">
                <input type="text" placeholder="MM/YY" maxlength="5">
                <input type="password" placeholder="CVV" maxlength="3">
            </div>
            <button class="btn btn-primary" onclick="simulateCardPay()">Pay Securely</button>
        </div>

        <div id="qrBox" class="card-box" style="text-align:center;">
            <img src="https://i.ibb.co/L5YwN6v/30246.jpg" width="180">
            <button class="btn btn-primary" onclick="showConfirmBtn()">I Paid</button>
        </div>

        <div id="bankBox" class="card-box">
            <p>People's Bank | Acc: 072200170040756</p>
            <button class="btn btn-primary" onclick="showConfirmBtn()">Payment Done</button>
        </div>

        <div id="confirmBox" style="display:none; margin-top:20px;">
            <button class="btn btn-primary" style="background:var(--dark);" onclick="finalOrder()">Confirm Final Order</button>
        </div>
    </div>

    <div id="successPage" style="display:none; text-align:center; padding:40px 0;">
        <h1 style="color:var(--primary);">‚úÖ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í!</h1>
        <p>‡∂î‡∂∂‡∂ú‡∑ö ‡∂á‡∂±‡∑Ä‡∑î‡∂∏ ‡∂∫‡∑ú‡∂∏‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì.</p>
        <button class="btn btn-primary" onclick="location.reload()">Back to Home</button>
    </div>
</div>

<script>
    let userLocation = "";

    function attemptLogin() {
        const name = document.getElementById('loginName').value;
        const phone = document.getElementById('loginPhone').value;
        if(!name || phone.length < 10) { alert("‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∑Ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±."); return; }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((p) => {
                userLocation = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                document.getElementById('loginOverlay').style.display = "none";
                document.getElementById('mainApp').style.display = "block";
            }, () => { alert("Location ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì‡∂∏ ‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫ ‡∑Ä‡∑ö."); });
        }
    }

    function calcTotal() {
        let food = parseFloat(document.getElementById('foodItem').value) || 0;
        let qty = parseInt(document.getElementById('qty').value) || 1;
        let area = parseFloat(document.getElementById('area').value) || 0;
        document.getElementById('totalDisplay').innerText = `‡∂∏‡∑î‡∑Ö‡∑î ‡∂ú‡∑è‡∑É‡∑ä‡∂≠‡∑î‡∑Ä: ‡∂ª‡∑î. ${(food * qty) + area}.00`;
    }

    function togglePayFields() {
        const method = document.getElementById('payMethod').value;
        document.getElementById('cardBox').style.display = (method === 'Card') ? 'block' : 'none';
        document.getElementById('qrBox').style.display = (method === 'QR') ? 'block' : 'none';
        document.getElementById('bankBox').style.display = (method === 'Bank') ? 'block' : 'none';
        document.getElementById('confirmBox').style.display = 'none';
    }

    function simulateCardPay() {
        document.getElementById('paymentProcessing').style.display = 'flex';
        setTimeout(() => { 
            document.getElementById('paymentProcessing').style.display = 'none';
            showConfirmBtn();
        }, 3000);
    }

    function showConfirmBtn() {
        document.getElementById('confirmBox').style.display = 'block';
    }

    function finalOrder() {
        const name = document.getElementById('loginName').value;
        const phone = document.getElementById('loginPhone').value;
        const food = document.getElementById('foodItem').options[document.getElementById('foodItem').selectedIndex].text;
        const total = document.getElementById('totalDisplay').innerText;
        const method = document.getElementById('payMethod').value;
        
        const finalMsg = `*GOFOODS NEW ORDER*%0AClient: ${name}%0APhone: ${phone}%0AOrder: ${food}%0APayment: ${method}%0A${total}%0ALocation: ${userLocation}`;
        
        window.open(`https://wa.me/94776885969?text=${finalMsg}`, '_blank');
        document.getElementById('orderForm').style.display = 'none';
        document.getElementById('successPage').style.display = 'block';
    }
</script>
</body>
</html>
