<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoFoods Deliver</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2ecc71;
            --dark: #1a1a1a;
            --glass: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1d2b64 0%, #f8ff00 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px);
            display: flex; justify-content: center; align-items: center; z-index: 10000;
        }

        .modal-box {
            background: white; padding: 35px; border-radius: 30px;
            text-align: center; width: 85%; max-width: 400px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            animation: fadeInUp 0.5s ease-out;
        }

        .container {
            background: var(--glass);
            padding: 40px; border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            width: 100%; max-width: 480px;
            animation: fadeInUp 0.7s ease-out;
        }

        h1 { text-align: center; color: var(--dark); font-weight: 600; margin-bottom: 30px; }
        h1 span { color: var(--primary); }

        label { font-weight: 600; font-size: 14px; color: #444; display: block; margin-top: 18px; }
        
        input, select, textarea {
            width: 100%; padding: 14px; border: 1.5px solid #ddd; border-radius: 15px;
            margin-top: 8px; font-size: 15px; transition: 0.3s; box-sizing: border-box;
        }

        .btn {
            width: 100%; padding: 16px; border: none; border-radius: 15px;
            font-size: 16px; font-weight: 600; cursor: pointer; transition: 0.3s;
            margin-top: 15px; display: block; text-align: center; text-decoration: none; color: white;
        }

        .btn-green { background: var(--primary); box-shadow: 0 8px 15px rgba(46, 204, 113, 0.3); }
        .btn-blue { background: #3498db; }
        .btn-dark { background: #2c3e50; }
        .btn-whatsapp { background: #25D366; }

        .qty-row { display: flex; align-items: center; justify-content: space-between; background: #f0f0f0; padding: 10px 20px; border-radius: 15px; margin-top: 10px; }
        .qty-btn { background: var(--primary); color: white; border: none; width: 35px; height: 35px; border-radius: 10px; font-size: 20px; cursor: pointer; }
        
        .total-card {
            background: var(--dark); color: var(--primary);
            padding: 20px; border-radius: 20px; text-align: center;
            font-size: 24px; font-weight: 600; margin-top: 30px; border: 2px solid var(--primary);
        }

        #paymentDetails { display: none; margin-top: 20px; padding: 20px; background: #fff; border: 1px dashed var(--primary); border-radius: 15px; text-align: center; }
        .qr-img { width: 100%; max-width: 200px; border-radius: 15px; margin: 10px 0; }
        #previewImg { width: 100%; border-radius: 15px; margin-top: 10px; display: none; }

        /* Rider Animation Styles */
        #riderLoader { display: none; }
        .searching-text { font-size: 18px; color: var(--primary); font-weight: 600; animation: pulse 1.5s infinite; margin-top: 15px; }
        .rider-found { background: #e8f5e9; padding: 15px; border-radius: 15px; margin-top: 15px; border: 1px solid var(--primary); }

        #mainApp { opacity: 0; pointer-events: none; transition: 0.5s; }
    </style>
</head>
<body>

<div id="noticeOverlay" class="overlay">
    <div class="modal-box">
        <h2>GoFoods Deliver</h2>
        <span style="font-size: 50px; display:block; margin:15px 0;">üìç</span>
        <h3>‡∑É‡∑ö‡∑Ä‡∑è ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫‡∂±‡∑ä</h3>
        <p style="color: #666; font-size: 14px;">‡∂Ö‡∂∏‡∑ä‡∂∂‡∂Ω‡∂±‡∑ä‡∂≠‡∑ú‡∂ß, ‡∂∏‡∑è‡∂∏‡∂©‡∂Ω, ‡∂±‡∑ù‡∂±‡∂ú‡∂∏, ‡∑Ñ‡∑ê‡∂©‡∑Ä‡∑í‡∂±‡∑ä‡∂±, ‡∂∂‡∂ª‡∑Ä‡∂ö‡∑î‡∂π‡∑î‡∂ö, ‡∂∂‡∑ê‡∂∏‡∑í‡∂±‡∑í‡∂∫‡∂±‡∑ä‡∑Ä‡∑í‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∑Ä‡∂Ω‡∂ß ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂á‡∂±‡∑Ä‡∑î‡∂∏‡∑ä ‡∂∂‡∑è‡∂ª‡∂ú‡∂±‡∑î ‡∂Ω‡∑ê‡∂∂‡∑ö.</p>
        <button class="btn btn-green" onclick="closeNotice()">‡∂¥‡∑í‡∑Ö‡∑í‡∂ú‡∂±‡∑ä‡∂±‡∑Ä‡∑è (OK)</button>
    </div>
</div>

<div id="lockOverlay" class="overlay" style="display:none;">
    <div class="modal-box">
        <h2>GoFoods Deliver</h2>
        <p style="color: #888; font-size: 13px;">‡∑É‡∑ö‡∑Ä‡∑è‡∑Ä Unlock ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß PIN ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</p>
        <a href="https://wa.me/94776885969?text=Pin%20number" target="_blank" class="btn btn-whatsapp">üì© Get PIN via WhatsApp</a>
        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
        <input type="password" id="entryPin" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="text-align: center; font-size: 24px; letter-spacing: 10px;">
        <button class="btn btn-green" onclick="unlockSite()">Unlock Now</button>
    </div>
</div>

<div class="container" id="mainApp">
    <h1>GoFoods <span>Deliver</span></h1>
    
    <div id="formFields">
        <label>‡∂î‡∂∂‡∑ö ‡∂±‡∂∏</label>
        <input type="text" id="name" placeholder="‡∂±‡∂∏ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±">

        <label>‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫</label>
        <input type="tel" id="phone" placeholder="07xxxxxxxx">
        
        <label>‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ (GPS Location)</label>
        <button type="button" id="locBtn" class="btn btn-blue" onclick="getLocation()">üìç Get My Location</button>
        <input type="text" id="address" placeholder="Location ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∂Ø‡∑í‡∑É‡∑ä‡∑Ä‡∑ö" readonly>

        <label>‡∂Ü‡∑Ñ‡∑è‡∂ª ‡∑Ä‡∂ª‡∑ä‡∂ú‡∂∫</label>
        <select id="food" onchange="calculateTotal()">
            <option value="0">-- ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
            <option value="1100">‡∂†‡∑í‡∂ö‡∂±‡∑ä ‡∂ª‡∂∫‡∑í‡∑É‡∑ä - ‡∂ª‡∑î. 1100</option>
            <option value="1400">‡∂∏‡∑í‡∂ö‡∑ä‡∑É‡∑ä ‡∂ª‡∂∫‡∑í‡∑É‡∑ä - ‡∂ª‡∑î. 1400</option>
            <option value="990">‡∂ö‡∑ú‡∂≠‡∑ä‡∂≠‡∑î Full - ‡∂ª‡∑î. 990</option>
            <option value="500">‡∂†‡∑í‡∂ö‡∂±‡∑ä ‡∂ª‡∂∫‡∑í‡∑É‡∑ä (Normal) - ‡∂ª‡∑î. 500</option>
        </select>

        <label>‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫ (Quantity)</label>
        <div class="qty-row">
            <button class="qty-btn" onclick="updateQty(-1)">‚àí</button>
            <span id="qtyValue" style="font-weight: 600; font-size: 18px;">1</span>
            <button class="qty-btn" onclick="updateQty(1)">+</button>
        </div>

        <label>‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫ (Delivery Area)</label>
        <select id="area" onchange="calculateTotal()">
            <option value="0">-- ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
            <option value="200">‡∂Ö‡∂∏‡∑ä‡∂∂‡∂Ω‡∂±‡∑ä‡∂≠‡∑ú‡∂ß (200)</option>
            <option value="300">‡∂∏‡∑è‡∂∏‡∂©‡∂Ω (300)</option>
            <option value="200">‡∂±‡∑ù‡∂±‡∂ú‡∂∏ (200)</option>
            <option value="400">‡∑Ñ‡∑ê‡∂©‡∑Ä‡∑í‡∂±‡∑ä‡∂± (400)</option>
            <option value="450">‡∂∂‡∂ª‡∑Ä‡∂ö‡∑î‡∂π‡∑î‡∂ö (450)</option>
            <option value="350">‡∂∂‡∑ê‡∂∏‡∑í‡∂±‡∑í‡∂∫‡∂±‡∑ä‡∑Ä‡∑í‡∂Ω (350)</option>
        </select>

        <div class="total-card" id="displayTotal">‡∂ª‡∑î. 0.00</div>

        <label>‡∂ú‡∑ô‡∑Ä‡∑ì‡∂∏‡∑ö ‡∂ö‡∑ä‚Äç‡∂ª‡∂∏‡∂∫</label>
        <select id="payMethod" onchange="togglePayment()">
            <option value="">-- ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
            <option value="Online Bank Transfer">Online Bank Transfer</option>
            <option value="People's Pay QR Scan">People's Pay QR Scan</option>
        </select>

        <div id="paymentDetails">
            <div id="bankInfo" style="display:none;">
                <p style="font-weight:bold; color:var(--primary);">People's Bank</p>
                <p style="font-size:14px;">Acc: 072200170040756<br>Name: Sachi foods</p>
            </div>
            <div id="qrInfo" style="display:none;">
                <img src="<a href="https://imgbb.com/"><img src="https://i.ibb.co/YFy2wkRZ/IMG-20260121-WA0000.jpg" alt="IMG-20260121-WA0000" border="0" /></a>" class="qr-img">
            </div>
            <label style="margin-top:10px;">‡∂ú‡∑ô‡∑Ä‡∑ñ Slip ‡∂¥‡∂≠ ‡∂Ö‡∂¥‡∑ä‡∂Ω‡∑ù‡∂©‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</label>
            <input type="file" id="slipInput" accept="image/*" onchange="preview(event)">
            <img id="previewImg">
        </div>

        <button class="btn btn-green" style="font-size: 18px; margin-top: 30px;" onclick="startRiderSearch()">‚úÖ Confirm Order</button>
    </div>

    <div id="riderLoader" style="text-align:center;">
        <span style="font-size: 60px;">üõµ</span>
        <div class="searching-text">Rider ‡∂ö‡∑ô‡∂±‡∑ô‡∂ö‡∑ä ‡∑É‡∑ú‡∂∫‡∂∏‡∑í‡∂±‡∑ä...</div>
        <p style="color:#777; font-size:12px;">‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠‡∂ö‡∑ä ‡∂ª‡∑ê‡∂≥‡∑ì ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±</p>
    </div>

    <div id="doneSection" style="display:none; text-align:center;">
        <div class="rider-found">
            <h4 style="margin:0; color:var(--dark);">Rider ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∂±‡∑ä‡∂±‡∑è ‡∂Ω‡∂Ø‡∑ì! ‚úÖ</h4>
            <p id="assignedRider" style="font-weight:600; font-size:18px; color:var(--primary); margin:10px 0;"></p>
        </div>
        <h2 style="color: var(--primary); margin-top:20px;">‡∂á‡∂´‡∑Ä‡∑î‡∂∏ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í!</h2>
        <p>‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª WhatsApp ‡∑Ñ‡∂ª‡∑Ñ‡∑è ‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø‡∑ì.</p>
        <button class="btn btn-dark" onclick="location.reload()">‡∂∏‡∑î‡∂Ω‡∂ß ‡∂∫‡∂±‡∑ä‡∂±</button>
    </div>
</div>

<script>
    const securePins = ["1997", "1112", "2020"];
    const riders = ["Navindu 7628", "Sachithra 6388", "Savidu 6399"];
    let quantity = 1;
    let selectedRider = "";

    function closeNotice() {
        document.getElementById('noticeOverlay').style.display = 'none';
        document.getElementById('lockOverlay').style.display = 'flex';
    }

    function unlockSite() { 
        if (securePins.includes(document.getElementById('entryPin').value)) { 
            document.getElementById('lockOverlay').style.display = "none"; 
            document.getElementById('mainApp').style.opacity = "1"; 
            document.getElementById('mainApp').style.pointerEvents = "auto"; 
        } else { alert("‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í PIN ‡∂Ö‡∂Ç‡∂ö‡∂∫‡∂ö‡∑ä!"); } 
    }

    function updateQty(val) { 
        quantity += val; if (quantity < 1) quantity = 1; 
        document.getElementById('qtyValue').innerText = quantity; calculateTotal(); 
    }

    function calculateTotal() { 
        let f = parseFloat(document.getElementById('food').value) || 0; 
        let a = parseFloat(document.getElementById('area').value) || 0;
        document.getElementById('displayTotal').innerText = "‡∂∏‡∑î‡∑Ö‡∑î ‡∂ú‡∑è‡∑É‡∑ä‡∂≠‡∑î‡∑Ä: ‡∂ª‡∑î. " + ((f * quantity) + a).toFixed(2); 
    }

    function togglePayment() {
        let m = document.getElementById('payMethod').value;
        document.getElementById('paymentDetails').style.display = m ? 'block' : 'none';
        document.getElementById('bankInfo').style.display = (m === "Online Bank Transfer") ? 'block' : 'none';
        document.getElementById('qrInfo').style.display = (m === "People's Pay QR Scan") ? 'block' : 'none';
    }

    function preview(event) {
        let reader = new FileReader();
        reader.onload = function(){ document.getElementById('previewImg').src = reader.result; document.getElementById('previewImg').style.display = "block"; };
        reader.readAsDataURL(event.target.files[0]);
    }

    function getLocation() {
        let btn = document.getElementById('locBtn');
        btn.innerText = "‚è≥ ‡∑É‡∑ú‡∂∫‡∂∏‡∑í‡∂±‡∑ä...";
        navigator.geolocation.getCurrentPosition((p) => {
            document.getElementById('address').value = `üìç GPS: https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
            btn.innerText = "‚úÖ Location Linked";
            btn.style.background = "#27ae60";
        }, (err) => {
            alert("Location ‡∂Ω‡∂∂‡∑è‡∂ú‡∂≠ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö.");
            btn.innerText = "üìç Get My Location";
        });
    }

    function startRiderSearch() {
        let name = document.getElementById('name').value;
        let phone = document.getElementById('phone').value;
        if(!name || !phone || !document.getElementById('payMethod').value) { alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∂¥‡∑î‡∂ª‡∑Ä‡∂±‡∑ä‡∂±."); return; }

        document.getElementById('formFields').style.display = 'none';
        document.getElementById('riderLoader').style.display = 'block';

        setTimeout(() => {
            selectedRider = riders[Math.floor(Math.random() * riders.length)];
            document.getElementById('assignedRider').innerText = "Rider: " + selectedRider;
            document.getElementById('riderLoader').style.display = 'none';
            document.getElementById('doneSection').style.display = 'block';
            sendToWhatsApp();
        }, 3500);
    }

    function sendToWhatsApp() {
        let name = document.getElementById('name').value;
        let phone = document.getElementById('phone').value;
        let food = document.getElementById('food').options[document.getElementById('food').selectedIndex].text;
        let area = document.getElementById('area').options[document.getElementById('area').selectedIndex].text;
        let total = document.getElementById('displayTotal').innerText;
        let loc = document.getElementById('address').value || "‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª ‡∂±‡∑ê‡∂≠";

        let msg = `*GoFoods New Order*%0A‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0Aüë§ ‡∂±‡∂∏: ${name}%0Aüìû ‡∂Ö‡∂Ç‡∂ö‡∂∫: ${phone}%0Aüçî ‡∂Ü‡∑Ñ‡∑è‡∂ª‡∂∫: ${food}%0Aüî¢ ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫: ${quantity}%0Aüìç ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫: ${area}%0Aüí∞ ${total}%0Aüõµ *Rider: ${selectedRider}*%0A‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0Aüó∫Ô∏è Location: ${loc}`;
        window.open(`https://wa.me/94776885969?text=${msg}`, '_blank');
    }
</script>

</body>
</html>

